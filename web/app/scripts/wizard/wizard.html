<div class="container-fluid" id="splash" ng-if="!maximized">

  <div class="row">
    <div class="col-sm-12 wizard-title">
      {{ name }}
    </div>
  </div>

  <div class="row wizard-nav-links">
    <div class="col-sm-12 text-center">
      <a href="#/">
        <i class="glyphicon glyphicon-arrow-left"></i> Back </a>
      |
      <a href ng-click="goToWizardsInProgress()"> Wizards in progress
        <i class="glyphicon glyphicon-bookmark"></i></a>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 entry-list-wrapper">
      <div class="text-center" ng-hide="workspace.loaded">
        <img src="images/progress.svg">
      </div>

      <div class="entry-list wizard" ng-show="workspace.loaded">
        <div class="entry" ng-repeat="step in steps">
          <div class="entry-header" ng-click="moveToStep($index)">
            <span class="icon">{{ $index + 1 }}</span>
            <span class="lead">{{ step.title }}</span>
            <button ng-show="expanded === $index"
              drop-tooltip="Switch to maximized view"
              class="btn wizard-maximize-button fa fa-expand"
              ng-click="toggleMaximized()">
            </button>
          </div>

          <div ng-show="expanded === $index && step.description" class="container-fluid"
            trusted-html="step.html" class="description">
          </div>

          <box-editor
            ng-show="expanded === $index"
            ng-if="step.popup === 'parameters'"
            workspace="workspace"
            wizard="true"
            box-id="step.box"></box-editor>

          <state-view
            ng-if="step.popup && step.popup !== 'parameters' && expanded === $index"
            workspace="workspace"
            plug="workspace.getOutputPlug(step.box, step.popup)"
            popup-model="{ height: 500, maxHeight: 500, width: 500 }">
          </state-view>

        </div>
      </div>
      <div class="entry-list footer">
        <a href class="btn btn-warning btn-lg" style="color: black;" ng-href="/workspace/{{ workspace.name }}">
          {{ util.user.wizardOnly ? 'View workspace' : 'Fine tune in workspace' }}
          <i class="fa fa-chevron-right"></i></a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <user-menu info="util.globals" direction="dropup" class="user-menu-at-bottom"></user-menu>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <p class="version">{{ util.globals.version }}</p>
    </div>
  </div>
</div>

<div class="container-fluid wizard-max" ng-if="maximized" ng-class="{ visualization: isShowingVisualization() }">
  <div class="wizard-top-steps">
    <a class="step" ng-if="expanded > 0" drop-tooltip="Go to previous step"
      ng-click="moveToStep(expanded - 1)">
      {{ steps[expanded - 1].title }} <i class="fa fa-long-arrow-left"></i></a>
    <div class="step active">
      {{ steps[expanded].title }}
      <button drop-tooltip="Switch to sequential view"
        class="btn wizard-minimize-button fa fa-compress"
        ng-click="toggleMaximized()">
      </button>
    </div>
    <a class="step" ng-if="expanded < steps.length - 1" drop-tooltip="Go to next step"
      ng-click="moveToStep(expanded + 1);">
      <i class="fa fa-long-arrow-right"></i> {{ steps[expanded + 1].title }}</a>
  </div>

  <div ng-show="steps[expanded].description" trusted-html="steps[expanded].html" class="description">
  </div>

  <box-editor
    ng-if="steps[expanded].popup === 'parameters'"
    workspace="workspace"
    wizard="true"
    box-id="steps[expanded].box"></box-editor>

  <state-view
    ng-if="steps[expanded].popup && steps[expanded].popup !== 'parameters'"
    workspace="workspace"
    plug="workspace.getOutputPlug(steps[expanded].box, steps[expanded].popup)"
    popup-model="{ height: $window.innerHeight, maxHeight: $window.innerHeight, width: 500 }">
  </state-view>
</div>
