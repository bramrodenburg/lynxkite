<!-- This has to be inside a <form class="form-horizontal">. -->
<div class="form-group" ng-repeat="param in meta.parameters">
  <label for="{{param.id}}" class="col-sm-4 control-label">
    {{param.title}}
    <help-popup href="{{meta.htmlId + '-' + param.id}}"></help-popup>
  </label>
  <div class="col-sm-8 operation-attribute-input" id="{{param.id}}">
    <i class="glyphicon glyphicon-plus-sign"
      ng-show="parametricFlags[param.id] === true && canBeParametric(param)"
      ng-click="parametricFlags[param.id] = false">
    </i>
    <i class="glyphicon glyphicon-minus-sign"
      ng-show="parametricFlags[param.id] !== true && canBeParametric(param)"
      ng-click="parametricFlags[param.id] = true"></i>

    <input ng-if="param.kind === 'default' && parametricFlags[param.id] !== true"
        class="form-control operation-attribute-entry"
        ng-model="output[param.id]"
        ng-submit="onBlur()"
        ng-disabled="!editable">
    <input ng-if="param.kind === 'default' && parametricFlags[param.id] === true"
       class="form-control operation-attribute-entry"
       ng-model="parametric[param.id]"
       ng-submit="onBlur()"
       ng-disabled="!editable">
    <div
      ui-ace="{
        mode: '{{ param.payload.language }}',
        showGutter: false,
        rendererOptions: {
          fontSize: '16px'
        },
        advanced: {
          behavioursEnabled: false,
          useWorker: false
        },
        onLoad: onLoad,
      }"
      class="form-control operation-attribute-entry"
      ng-if="param.kind === 'code' && parametricFlags[param.id] !== true"
      ng-model="output[param.id]"
      ng-disabled="!editable"></div>

    <div
      ui-ace="{
        mode: '{{ param.payload.language }}',
        showGutter: false,
        rendererOptions: {
          fontSize: '16px'
        },
        advanced: {
          behavioursEnabled: false,
          useWorker: false
        },
        onLoad: onLoad,
      }"
      class="form-control operation-attribute-entry"
      ng-if="param.kind === 'code'  && parametricFlags[param.id] === true"
      ng-model="parametric[param.id]"
      ng-disabled="!editable"></div>

    <file-parameter ng-if="param.kind === 'file'"
        editable="editable"
        model="output[param.id]"
        on-blur="onBlur()"
        file-uploads="fileUploads.count"
        class="operation-attribute-entry">
    </file-parameter>
    <model-parameter ng-if="param.kind === 'model'"
        param="param"
        editable="editable"
        model-json="output[param.id]"
        class="operation-attribute-entry">
    </model-parameter>
    <table-kind
      ng-if="param.kind === 'imported-table'"
      box="box"
      params="output"
      guid="output[param.id]"
      on-blur="onBlur()"
      file-uploads="fileUploads.count"
      class="operation-attribute-entry">
    </table-kind>
    <select
      ng-disabled="!editable"
      ng-if="((param.kind === 'choice' && !param.multipleChoice) || (param.kind === 'segmentation'))
        && parametricFlags[param.id] !== true"
      class="form-control operation-attribute-entry"
      ng-model="output[param.id]"
      ng-change="onBlur()"
      ng-options="option.id as option.title for option in param.options"></select>
    <input
      ng-disabled="!editable"
      ng-if="((param.kind === 'choice' && !param.multipleChoice) || (param.kind === 'segmentation'))
        && parametricFlags[param.id] === true"
      class="form-control operation-attribute-entry"
      ng-model="parametric[param.id]"
      ng-change="onBlur()">
    <select
      ng-disabled="!editable"
      ng-if="param.kind === 'choice' && param.multipleChoice"
      multiple
      ng-attr-size="{{ param.options.length }}"
      class="form-control operation-attribute-entry"
      ng-model="multiOutput[param.id]"
      ng-change="onBlur()"
      ng-options="option.id as option.title for option in param.options"></select>
    <tag-list
      editable="editable"
      ng-if="param.kind === 'tag-list'"
      model="multiOutput[param.id]"
      on-blur="onBlur()"
      options="param.options"
      class="operation-attribute-entry"></tag-list>
    <parameters-parameter
      ng-if="param.kind === 'parameters'"
      model="output[param.id]"
      class="operation-attribute-entry"></parameters-parameter>
  </div>
</div>
