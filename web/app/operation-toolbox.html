<div class="operation-toolbox row" ng-class="{ open: category || searching }">
  <div class="col-sm-1 categories">
    <div class="category yellow" ng-class="{ active: searching }"
      tooltip-append-to-body="true" tooltip-placement="left" tooltip="Search"
      ng-click="searchClicked()">
      <i class="glyphicon glyphicon-search"></i>
    </div>
    <div ng-repeat="cat in categories"
      class="category {{cat.color}}" ng-class="{ active: category === cat }"
      tooltip-append-to-body="true" tooltip-placement="left" tooltip="{{cat.title}}"
      ng-click="clickedCat(cat)">
      <span ng-if="cat.icon" class="glyphicon glyphicon-{{cat.icon}}"></span>
      <span ng-if="!cat.icon">{{cat.title[0]}}</span>
    </div>
  </div>
  <div ng-if="category && !op" class="panel box col-sm-11 {{category.color}}">
    <h1>{{category.title}}</h1>
    <div class="list-group">
      <div ng-repeat="op in category.ops" ng-click="clickedOp(op)"
          class="list-group-item operation" ng-class="{ disabled: !op.status.enabled }"
          tooltip-html-unsafe="{{op.status.disabledReason || op.description}}"
          tooltip-append-to-body="true" tooltip-placement="left">
        {{op.title}}
      </div>
    </div>
  </div>
  <div ng-if="searching && !op" class="panel box col-sm-11 yellow">
    <h1><input id="filter" ng-model="opFilter"></h1>
    <div class="list-group">
      <div ng-repeat="op in allOps | filter: { title: opFilter } | orderBy: 'title'" ng-click="clickedOp(op)"
          class="list-group-item operation"
          ng-class="{ disabled: !op.status.enabled, highlight: $index === searchSelection }"
          tooltip-html-unsafe="{{op.status.disabledReason || op.description}}"
          tooltip-append-to-body="true" tooltip-placement="left">
        {{op.title}}
      </div>
    </div>
  </div>
  <div ng-if="op && findOp(op)">
    <operation class="list-group" op="findOp(op)" color="findColor(op)" params="params"></operation>
  </div>
</div>
