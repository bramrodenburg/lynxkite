<form class="form-horizontal">
  <div class="form-group">
    <label for="datatype" class="col-sm-4 control-label">
      Type of data to import
      <help-popup href="import-formats"></help-popup>
    </label>
    <div class="col-sm-8" id="datatype">
      <select
       class="form-control"
       ng-disabled="inputsDisabled"
       ng-model="datatype">
        <option value="csv">CSV files</option>
        <option value="jdbc">Database table (via JDBC)</option>
      </select>
    </div>
  </div>
  <div ng-show="datatype === 'csv'">
    <div class="form-group">
      <label for="csv-filename" class="col-sm-4 control-label">
        Name of CSV files to import
        <help-popup href="import-csv-path"></help-popup>
      </label>
      <div class="col-sm-8" id="csv-filename">
        <file-parameter
          editable="!inputsDisabled"
          model="csv.filename"
          file-uploads="csv.fileUploadCount">
        </file-parameter>
      </div>
    </div>
    <div class="form-group">
      <label for="csv-column-names" class="col-sm-4 control-label">
        CSV columns
        <help-popup href="import-csv-columns"></help-popup>
      </label>
      <div class="col-sm-8" id="csv-column-names">
        <input class="form-control"
               ng-model="csv.columnNames"
               ng-disabled="inputsDisabled"
               placeholder="Comma separated. Leave empty to read from first line." >
      </div>
    </div>
    <div class="form-group">
      <label for="csv-delimiter" class="col-sm-4 control-label">
        Delimiter
        <help-popup href="import-csv-delimiter"></help-popup>
      </label>
      <div class="col-sm-8" id="csv-delimiter">
        <input class="form-control"
               ng-disabled="inputsDisabled"
               ng-model="csv.delimiter">
      </div>
    </div>
    <div class="form-group">
      <label for="csv-import-mode" class="col-sm-4 control-label">
        Format error handling
        <help-popup href="import-csv-mode"></help-popup>
      </label>
      <div class="col-sm-8" id="csv-import-mode">
        <select
          class="form-control"
          ng-disabled="inputsDisabled"
          ng-model="csv.mode">
          <option value="FAILFAST">Fail on any malformed line</option>
          <option value="DROPMALFORMED">Ignore malformed lines</option>
          <option value="PERMISSIVE">Salvage malformed lines: truncate or fill with nulls</option>  
        </select>
      </div>
    </div>
  </div>

  <div ng-show="datatype === 'jdbc'">
    <div class="form-group">
      <label for="jdbc-url" class="col-sm-4 control-label">
        JDBC URL
        <help-popup href="import-jdbc-url"></help-popup>
      </label>
      <div class="col-sm-8" id="jdbc-url">
        <input class="form-control"
               ng-disabled="inputsDisabled"
               ng-model="jdbc.url">
      </div>
    </div>
    <div class="form-group">
      <label for="jdbc-table" class="col-sm-4 control-label">
        Table name
        <help-popup href="import-jdbc-table"></help-popup>
      </label>
      <div class="col-sm-8" id="jdbc-table">
        <input class="form-control"
               ng-disabled="inputsDisabled"
               ng-model="jdbc.table">
      </div>
    </div>
    <div class="form-group">
      <label for="jdbc-key-column" class="col-sm-4 control-label">
        Column used for data partitioning
        <help-popup href="import-jdbc-key-column"></help-popup>
      </label>
      <div class="col-sm-8" id="jdbc-key-column">
        <input class="form-control"
               ng-disabled="inputsDisabled"
               ng-model="jdbc.keyColumn"
               placeholder="Enter the name of a column of an integer type">
      </div>
    </div>
    <div class="form-group">
      <label for="jdbc-columns-to-import" class="col-sm-4 control-label">
        Columns to import
        <help-popup href="import-jdbc-columns-to-import"></help-popup>
      </label>
      <div class="col-sm-8" id="jdbc-columns-to-import">
        <input class="form-control"
               ng-model="jdbc.columnsToImport"
               ng-disabled="inputsDisabled"
               placeholder="Comma separated, leave empty to import all">
      </div>
    </div>
  </div>

  <div class="form-group" ng-show="importInProgress">
    <div class="col-sm-offset-4 col-sm-8">
      <span id="import-spinner" class="glyphicon glyphicon-cog"></span>
    </div>
  </div>
  <div ng-show="checkpoint">
    <div class="form-group">
      <div class="col-sm-offset-4 col-sm-8">
        Table successfully imported
      </div>
    </div>
    <div class="form-group">
      <label for="table-name" class="col-sm-4 control-label">
        Save table as
      </label>
      <div class="col-sm-8" id="table-name">
        <input class="form-control"
               ng-disabled="savingTable"
               ng-model="tableName">
      </div>
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-4 col-sm-8">
      <div
        ng-show="(datatype === 'csv') && csv.filename && !inputsDisabled"
        ng-click="importCSV()"
        class="btn btn-default">
        Import CSV file
      </div>
      <div
        ng-show="(datatype === 'jdbc') && jdbc.url && jdbc.table && jdbc.keyColumn && !inputsDisabled"
        ng-click="importJDBC()"
        class="btn btn-default">
        Import JDBC table
      </div>
      <div
        ng-show="checkpoint && tableName"
        ng-click="saveTable($event)"
        ng-disabled="savingTable"
        class="btn btn-default">
        Save table
      </div>
      <div ng-click="cancel($event)" class="btn btn-default">Cancel</div>
    </div>
  </div>
</form>
